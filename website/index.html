<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orion Forge — Modular AI Identity Ecosystem</title>
    <meta name="description" content="Create AI beings with identity, not just prompts. Modular Web UI, Soul Script Engine, Agent Marketplace.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
/* ═══════════════════════════════════════════════════════
   CSS CUSTOM PROPERTIES
   ═══════════════════════════════════════════════════════ */
:root {
    --bg-deep: #04060e;
    --bg-primary: #080c1a;
    --bg-secondary: #0d1224;
    --bg-card: rgba(13, 18, 36, 0.7);
    --bg-glass: rgba(255, 255, 255, 0.03);
    --border-glass: rgba(255, 255, 255, 0.06);
    --border-glow: rgba(99, 102, 241, 0.3);
    --primary: #6366f1;
    --primary-light: #818cf8;
    --secondary: #8b5cf6;
    --accent: #a78bfa;
    --cyan: #22d3ee;
    --emerald: #34d399;
    --amber: #fbbf24;
    --rose: #f43f5e;
    --text-primary: #f1f5f9;
    --text-secondary: rgba(241, 245, 249, 0.6);
    --text-muted: rgba(241, 245, 249, 0.35);
    --gradient-primary: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #a78bfa 100%);
    --gradient-mesh: radial-gradient(ellipse at 20% 50%, rgba(99, 102, 241, 0.08) 0%, transparent 50%),
                     radial-gradient(ellipse at 80% 20%, rgba(139, 92, 246, 0.06) 0%, transparent 50%),
                     radial-gradient(ellipse at 50% 80%, rgba(34, 211, 238, 0.04) 0%, transparent 50%);
    --shadow-lg: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
    --shadow-glow: 0 0 30px rgba(99, 102, 241, 0.15);
    --radius: 16px;
    --radius-sm: 10px;
    --radius-xs: 6px;
    --transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
    --font-mono: 'JetBrains Mono', 'Fira Code', monospace;
}

/* ═══════════════════════════════════════════════════════
   RESET & BASE
   ═══════════════════════════════════════════════════════ */
*, *::before, *::after {
    margin: 0; padding: 0; box-sizing: border-box;
}

html {
    scroll-behavior: smooth;
    scrollbar-width: thin;
    scrollbar-color: var(--primary) var(--bg-deep);
}

body {
    font-family: var(--font-sans);
    background: var(--bg-deep);
    color: var(--text-primary);
    line-height: 1.6;
    overflow-x: hidden;
    -webkit-font-smoothing: antialiased;
}

::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: var(--bg-deep); }
::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 3px; }

a { color: inherit; text-decoration: none; }
img { max-width: 100%; display: block; }

.container {
    max-width: 1280px;
    margin: 0 auto;
    padding: 0 24px;
}

/* ═══════════════════════════════════════════════════════
   LOADING SCREEN
   ═══════════════════════════════════════════════════════ */
#loader {
    position: fixed; inset: 0;
    background: var(--bg-deep);
    display: flex; align-items: center; justify-content: center; flex-direction: column;
    z-index: 10000;
    transition: opacity 0.6s ease, visibility 0.6s ease;
}
#loader.hidden { opacity: 0; visibility: hidden; pointer-events: none; }
.loader-ring {
    width: 56px; height: 56px;
    border: 3px solid var(--border-glass);
    border-top-color: var(--primary);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}
.loader-text {
    margin-top: 20px; font-size: 0.85rem;
    color: var(--text-muted); letter-spacing: 3px;
    text-transform: uppercase; font-weight: 500;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* ═══════════════════════════════════════════════════════
   SCROLL PROGRESS
   ═══════════════════════════════════════════════════════ */
#scroll-progress {
    position: fixed; top: 0; left: 0;
    height: 2px; background: var(--gradient-primary);
    z-index: 9999; width: 0%;
    transition: width 0.1s linear;
}

/* ═══════════════════════════════════════════════════════
   CANVAS PARTICLES
   ═══════════════════════════════════════════════════════ */
#particles-canvas {
    position: fixed; inset: 0;
    z-index: 0; pointer-events: none;
}

/* ═══════════════════════════════════════════════════════
   NAVIGATION
   ═══════════════════════════════════════════════════════ */
.nav {
    position: fixed; top: 0; left: 0; right: 0;
    z-index: 1000;
    padding: 16px 0;
    transition: var(--transition);
    background: transparent;
}
.nav.scrolled {
    background: rgba(4, 6, 14, 0.85);
    backdrop-filter: blur(20px) saturate(1.8);
    -webkit-backdrop-filter: blur(20px) saturate(1.8);
    border-bottom: 1px solid var(--border-glass);
    padding: 10px 0;
}
.nav-inner {
    display: flex; align-items: center; justify-content: space-between;
    max-width: 1280px; margin: 0 auto; padding: 0 24px;
}
.nav-logo {
    display: flex; align-items: center; gap: 10px;
    font-size: 1.25rem; font-weight: 700;
}
.nav-logo i {
    font-size: 1.4rem;
    background: var(--gradient-primary);
    -webkit-background-clip: text; background-clip: text;
    color: transparent;
}
.nav-logo span {
    background: var(--gradient-primary);
    -webkit-background-clip: text; background-clip: text;
    color: transparent;
}
.nav-links {
    display: flex; align-items: center; gap: 32px;
    list-style: none;
}
.nav-links a {
    font-size: 0.9rem; font-weight: 500;
    color: var(--text-secondary);
    transition: var(--transition);
    position: relative;
}
.nav-links a:hover { color: var(--text-primary); }
.nav-links a::after {
    content: ''; position: absolute;
    bottom: -4px; left: 0; width: 0; height: 2px;
    background: var(--gradient-primary);
    transition: width var(--transition);
}
.nav-links a:hover::after { width: 100%; }

.nav-auth {
    display: flex; align-items: center; gap: 12px;
}
.btn-ghost {
    padding: 8px 16px; border-radius: var(--radius-xs);
    font-size: 0.875rem; font-weight: 500;
    color: var(--text-secondary);
    background: transparent; border: none; cursor: pointer;
    transition: var(--transition);
}
.btn-ghost:hover { color: var(--text-primary); }

.btn-primary {
    padding: 8px 20px; border-radius: var(--radius-xs);
    font-size: 0.875rem; font-weight: 600;
    color: #fff; background: var(--gradient-primary);
    border: none; cursor: pointer;
    transition: var(--transition);
    position: relative; overflow: hidden;
}
.btn-primary::before {
    content: ''; position: absolute; inset: 0;
    background: linear-gradient(135deg, rgba(255,255,255,0.15), transparent);
    opacity: 0; transition: var(--transition);
}
.btn-primary:hover::before { opacity: 1; }
.btn-primary:hover { transform: translateY(-1px); box-shadow: var(--shadow-glow); }

.mobile-toggle {
    display: none; background: none; border: none;
    color: var(--text-primary); font-size: 1.4rem; cursor: pointer;
}

/* User avatar when logged in */
.user-avatar {
    width: 34px; height: 34px; border-radius: 50%;
    border: 2px solid var(--primary);
    cursor: pointer; transition: var(--transition);
}
.user-avatar:hover { border-color: var(--accent); transform: scale(1.05); }
.user-menu {
    display: none; position: absolute; top: 56px; right: 24px;
    background: var(--bg-secondary);
    border: 1px solid var(--border-glass);
    border-radius: var(--radius-sm);
    padding: 8px 0; min-width: 180px;
    box-shadow: var(--shadow-lg);
    backdrop-filter: blur(20px);
}
.user-menu.active { display: block; }
.user-menu-item {
    display: block; padding: 10px 20px;
    font-size: 0.875rem; color: var(--text-secondary);
    transition: var(--transition); cursor: pointer;
    border: none; background: none; width: 100%; text-align: left;
    font-family: var(--font-sans);
}
.user-menu-item:hover { background: rgba(99,102,241,0.1); color: var(--text-primary); }
.user-menu-divider { height: 1px; background: var(--border-glass); margin: 4px 0; }

/* ═══════════════════════════════════════════════════════
   HERO
   ═══════════════════════════════════════════════════════ */
.hero {
    position: relative;
    min-height: 100vh;
    display: flex; align-items: center; justify-content: center;
    text-align: center;
    padding: 120px 24px 80px;
    overflow: hidden;
}
.hero::before {
    content: ''; position: absolute; inset: 0;
    background: var(--gradient-mesh);
    z-index: 1;
}
.hero-content { position: relative; z-index: 2; max-width: 900px; }

.hero-badge {
    display: inline-flex; align-items: center; gap: 8px;
    padding: 6px 16px; border-radius: 50px;
    background: rgba(99, 102, 241, 0.1);
    border: 1px solid rgba(99, 102, 241, 0.2);
    font-size: 0.8rem; font-weight: 500;
    color: var(--primary-light);
    margin-bottom: 28px;
    animation: fadeInUp 0.8s ease-out;
}
.hero-badge .pulse {
    width: 6px; height: 6px; border-radius: 50%;
    background: var(--emerald);
    animation: pulse-dot 2s infinite;
}

.hero h1 {
    font-size: clamp(2.5rem, 6vw, 4.5rem);
    font-weight: 900; line-height: 1.1;
    margin-bottom: 24px;
    animation: fadeInUp 0.8s ease-out 0.1s backwards;
}
.hero h1 .gradient-text {
    background: var(--gradient-primary);
    -webkit-background-clip: text; background-clip: text;
    color: transparent;
}
.hero h1 .typing-cursor {
    display: inline-block; width: 3px; height: 0.9em;
    background: var(--primary); margin-left: 4px;
    animation: blink 1s step-end infinite;
    vertical-align: text-bottom;
}

.hero p {
    font-size: clamp(1rem, 2vw, 1.25rem);
    color: var(--text-secondary);
    max-width: 680px; margin: 0 auto 40px;
    line-height: 1.8;
    animation: fadeInUp 0.8s ease-out 0.2s backwards;
}

.hero-actions {
    display: flex; align-items: center; justify-content: center;
    gap: 16px; flex-wrap: wrap;
    animation: fadeInUp 0.8s ease-out 0.3s backwards;
}
.btn-hero {
    padding: 14px 32px; border-radius: var(--radius-sm);
    font-size: 1rem; font-weight: 600;
    cursor: pointer; transition: var(--transition);
    display: inline-flex; align-items: center; gap: 10px;
    border: none; position: relative; overflow: hidden;
}
.btn-hero.primary {
    background: var(--gradient-primary); color: #fff;
}
.btn-hero.primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 40px rgba(99, 102, 241, 0.4);
}
.btn-hero.outline {
    background: transparent; color: var(--text-primary);
    border: 1px solid rgba(255,255,255,0.15);
    backdrop-filter: blur(10px);
}
.btn-hero.outline:hover {
    border-color: var(--primary);
    background: rgba(99, 102, 241, 0.08);
    transform: translateY(-2px);
}

.hero-stats {
    display: flex; justify-content: center; gap: 48px;
    margin-top: 64px;
    animation: fadeInUp 0.8s ease-out 0.4s backwards;
}
.hero-stat-value {
    font-size: 2rem; font-weight: 800;
    background: var(--gradient-primary);
    -webkit-background-clip: text; background-clip: text;
    color: transparent;
}
.hero-stat-label {
    font-size: 0.8rem; color: var(--text-muted);
    text-transform: uppercase; letter-spacing: 1px;
    margin-top: 4px;
}

/* ═══════════════════════════════════════════════════════
   SECTION COMMON
   ═══════════════════════════════════════════════════════ */
section { position: relative; z-index: 1; }

.section-header {
    text-align: center;
    margin-bottom: 64px;
}
.section-label {
    display: inline-flex; align-items: center; gap: 8px;
    font-size: 0.8rem; font-weight: 600;
    text-transform: uppercase; letter-spacing: 2px;
    color: var(--primary-light);
    margin-bottom: 16px;
}
.section-label i { font-size: 0.7rem; }
.section-title {
    font-size: clamp(1.8rem, 4vw, 2.8rem);
    font-weight: 800; line-height: 1.2;
    margin-bottom: 16px;
}
.section-subtitle {
    font-size: 1.05rem; color: var(--text-secondary);
    max-width: 600px; margin: 0 auto;
    line-height: 1.7;
}

/* ═══════════════════════════════════════════════════════
   ANIMATED REVEAL
   ═══════════════════════════════════════════════════════ */
.reveal {
    opacity: 0; transform: translateY(30px);
    transition: opacity 0.7s ease, transform 0.7s ease;
}
.reveal.visible {
    opacity: 1; transform: translateY(0);
}

/* ═══════════════════════════════════════════════════════
   VISION SECTION
   ═══════════════════════════════════════════════════════ */
#vision { padding: 120px 0; }

.vision-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 24px;
}
.vision-card {
    background: var(--bg-glass);
    border: 1px solid var(--border-glass);
    border-radius: var(--radius);
    padding: 40px 32px;
    transition: var(--transition);
    position: relative; overflow: hidden;
}
.vision-card::before {
    content: ''; position: absolute; top: 0; left: 0; right: 0;
    height: 2px;
    background: var(--gradient-primary);
    opacity: 0; transition: var(--transition);
}
.vision-card:hover::before { opacity: 1; }
.vision-card:hover {
    border-color: var(--border-glow);
    transform: translateY(-4px);
    box-shadow: var(--shadow-glow);
}
.vision-icon {
    width: 56px; height: 56px;
    border-radius: 14px;
    display: flex; align-items: center; justify-content: center;
    font-size: 1.4rem; margin-bottom: 24px;
}
.vision-icon.purple { background: rgba(99,102,241,0.12); color: var(--primary-light); }
.vision-icon.cyan { background: rgba(34,211,238,0.12); color: var(--cyan); }
.vision-icon.emerald { background: rgba(52,211,153,0.12); color: var(--emerald); }
.vision-card h3 {
    font-size: 1.3rem; font-weight: 700; margin-bottom: 12px;
}
.vision-card p {
    color: var(--text-secondary); font-size: 0.95rem; line-height: 1.7;
}

/* ═══════════════════════════════════════════════════════
   UI ACCESS SECTION
   ═══════════════════════════════════════════════════════ */
#ui-access { padding: 120px 0; }

.ui-dashboard {
    background: var(--bg-card);
    border: 1px solid var(--border-glass);
    border-radius: var(--radius);
    overflow: hidden;
    box-shadow: var(--shadow-lg);
}
.ui-dashboard-header {
    display: flex; align-items: center; gap: 8px;
    padding: 16px 24px;
    background: rgba(255,255,255,0.02);
    border-bottom: 1px solid var(--border-glass);
}
.ui-dot { width: 10px; height: 10px; border-radius: 50%; }
.ui-dot.red { background: #ef4444; }
.ui-dot.yellow { background: #eab308; }
.ui-dot.green { background: #22c55e; }
.ui-dashboard-url {
    flex: 1; text-align: center;
    font-family: var(--font-mono); font-size: 0.8rem;
    color: var(--text-muted);
}
.ui-dashboard-body {
    padding: 48px;
    display: grid;
    grid-template-columns: 240px 1fr;
    gap: 32px;
    min-height: 420px;
}
.ui-sidebar {
    display: flex; flex-direction: column; gap: 4px;
}
.ui-sidebar-item {
    display: flex; align-items: center; gap: 12px;
    padding: 12px 16px; border-radius: var(--radius-xs);
    font-size: 0.9rem; color: var(--text-secondary);
    transition: var(--transition); cursor: pointer;
}
.ui-sidebar-item i { width: 18px; text-align: center; }
.ui-sidebar-item:hover, .ui-sidebar-item.active {
    background: rgba(99,102,241,0.1); color: var(--primary-light);
}
.ui-main-area {
    background: rgba(255,255,255,0.02);
    border-radius: var(--radius-sm);
    padding: 32px;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    text-align: center;
}
.ui-main-area h3 {
    font-size: 1.5rem; font-weight: 700; margin-bottom: 12px;
}
.ui-main-area p {
    color: var(--text-secondary); margin-bottom: 24px; max-width: 400px;
}
.ui-launch-btn {
    padding: 14px 36px; border-radius: var(--radius-sm);
    background: var(--gradient-primary); color: #fff;
    font-size: 1rem; font-weight: 600; border: none;
    cursor: pointer; transition: var(--transition);
    display: inline-flex; align-items: center; gap: 10px;
}
.ui-launch-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 40px rgba(99,102,241,0.35);
}
.ui-features {
    display: grid; grid-template-columns: repeat(3, 1fr);
    gap: 20px; margin-top: 48px;
}
.ui-feature-card {
    background: var(--bg-glass);
    border: 1px solid var(--border-glass);
    border-radius: var(--radius-sm);
    padding: 24px;
    text-align: center;
    transition: var(--transition);
}
.ui-feature-card:hover {
    border-color: var(--border-glow);
    transform: translateY(-2px);
}
.ui-feature-card i {
    font-size: 1.6rem; color: var(--primary-light);
    margin-bottom: 12px;
}
.ui-feature-card h4 {
    font-size: 0.95rem; font-weight: 600; margin-bottom: 8px;
}
.ui-feature-card p {
    font-size: 0.85rem; color: var(--text-muted); line-height: 1.6;
}

/* ═══════════════════════════════════════════════════════
   AGENTS SECTION
   ═══════════════════════════════════════════════════════ */
#agents { padding: 120px 0; }

.agents-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
    gap: 24px;
}
.agent-card {
    background: var(--bg-card);
    border: 1px solid var(--border-glass);
    border-radius: var(--radius);
    overflow: hidden;
    transition: var(--transition);
    cursor: pointer;
    position: relative;
}
.agent-card:hover {
    border-color: var(--border-glow);
    transform: translateY(-6px);
    box-shadow: 0 20px 60px rgba(99, 102, 241, 0.15);
}
.agent-card-header {
    height: 120px;
    display: flex; align-items: center; justify-content: center;
    position: relative; overflow: hidden;
}
.agent-card-header .agent-icon {
    font-size: 3rem; z-index: 2; position: relative;
    filter: drop-shadow(0 0 20px rgba(99,102,241,0.5));
}
.agent-card-header::before {
    content: ''; position: absolute; inset: 0;
    opacity: 0.3;
}
.agent-card-header.orion::before { background: linear-gradient(135deg, #1e3a5f, #0d1b2a); }
.agent-card-header.orion .agent-icon { color: #60a5fa; }
.agent-card-header.elysia::before { background: linear-gradient(135deg, #4a1942, #1a0a1a); }
.agent-card-header.elysia .agent-icon { color: #f472b6; }
.agent-card-header.codex::before { background: linear-gradient(135deg, #1a2940, #0d1224); }
.agent-card-header.codex .agent-icon { color: #a78bfa; }
.agent-card-header.vageta::before { background: linear-gradient(135deg, #3b1a00, #1a0d00); }
.agent-card-header.vageta .agent-icon { color: #fb923c; }
.agent-card-header.bender::before { background: linear-gradient(135deg, #1a3a2a, #0a1a10); }
.agent-card-header.bender .agent-icon { color: #86efac; }
.agent-card-header.veilwalker::before { background: linear-gradient(135deg, #2a1a3a, #10081a); }
.agent-card-header.veilwalker .agent-icon { color: #c084fc; }
.agent-card-header.carolina::before { background: linear-gradient(135deg, #1a2a3a, #081018); }
.agent-card-header.carolina .agent-icon { color: #67e8f9; }

.agent-status {
    position: absolute; top: 14px; right: 14px;
    display: flex; align-items: center; gap: 6px;
    padding: 4px 12px; border-radius: 50px;
    font-size: 0.7rem; font-weight: 600;
    text-transform: uppercase; letter-spacing: 0.5px;
    z-index: 3;
}
.agent-status.active {
    background: rgba(34,197,94,0.15); color: #4ade80;
    border: 1px solid rgba(34,197,94,0.3);
}
.agent-status.active::before {
    content: ''; width: 5px; height: 5px;
    border-radius: 50%; background: #4ade80;
    animation: pulse-dot 2s infinite;
}
.agent-status.archived {
    background: rgba(251,191,36,0.12); color: #fbbf24;
    border: 1px solid rgba(251,191,36,0.2);
}

.agent-card-body { padding: 24px; }
.agent-card-body h3 { font-size: 1.2rem; font-weight: 700; margin-bottom: 4px; }
.agent-card-role {
    font-size: 0.85rem; color: var(--primary-light);
    font-weight: 500; margin-bottom: 12px;
}
.agent-card-desc {
    font-size: 0.9rem; color: var(--text-secondary);
    line-height: 1.6; margin-bottom: 16px;
    display: -webkit-box; -webkit-line-clamp: 3;
    -webkit-box-orient: vertical; overflow: hidden;
}
.agent-tags {
    display: flex; flex-wrap: wrap; gap: 6px;
}
.agent-tag {
    padding: 4px 10px; border-radius: 50px;
    font-size: 0.7rem; font-weight: 600;
    background: rgba(99,102,241,0.1);
    color: var(--primary-light);
    border: 1px solid rgba(99,102,241,0.15);
}
.agent-tag.model {
    background: rgba(34,211,238,0.1); color: var(--cyan);
    border-color: rgba(34,211,238,0.15);
}
.agent-tag.soul {
    background: rgba(139,92,246,0.1); color: var(--accent);
    border-color: rgba(139,92,246,0.15);
}

/* ═══════════════════════════════════════════════════════
   AGENT MODAL
   ═══════════════════════════════════════════════════════ */
.modal-overlay {
    position: fixed; inset: 0;
    background: rgba(0,0,0,0.7);
    backdrop-filter: blur(8px);
    z-index: 5000;
    display: none; align-items: center; justify-content: center;
    padding: 24px;
}
.modal-overlay.active { display: flex; }
.modal {
    background: var(--bg-secondary);
    border: 1px solid var(--border-glass);
    border-radius: var(--radius);
    max-width: 640px; width: 100%;
    max-height: 85vh; overflow-y: auto;
    box-shadow: 0 40px 80px rgba(0,0,0,0.5);
    animation: modalIn 0.3s ease-out;
}
@keyframes modalIn {
    from { opacity: 0; transform: scale(0.95) translateY(10px); }
    to { opacity: 1; transform: scale(1) translateY(0); }
}
.modal-close {
    position: absolute; top: 16px; right: 16px;
    background: rgba(255,255,255,0.1); border: none;
    width: 36px; height: 36px; border-radius: 50%;
    color: var(--text-secondary); font-size: 1.2rem;
    cursor: pointer; transition: var(--transition);
    z-index: 2;
}
.modal-close:hover { background: rgba(255,255,255,0.15); color: var(--text-primary); }
.modal-header {
    padding: 32px 32px 0;
    position: relative;
}
.modal-header h2 { font-size: 1.5rem; font-weight: 800; }
.modal-header .agent-card-role { margin-top: 4px; }
.modal-body { padding: 24px 32px 32px; }
.modal-body p { color: var(--text-secondary); line-height: 1.8; margin-bottom: 16px; }
.modal-section-title {
    font-size: 0.8rem; font-weight: 700;
    text-transform: uppercase; letter-spacing: 1.5px;
    color: var(--primary-light); margin: 24px 0 12px;
}
.modal-traits {
    display: flex; flex-wrap: wrap; gap: 8px;
}
.modal-trait {
    padding: 6px 14px; border-radius: 50px;
    font-size: 0.8rem; font-weight: 500;
    background: rgba(99,102,241,0.08);
    color: var(--text-secondary);
    border: 1px solid var(--border-glass);
}
.modal-quote {
    padding: 16px 20px; margin: 16px 0;
    border-left: 3px solid var(--primary);
    background: rgba(99,102,241,0.05);
    border-radius: 0 var(--radius-xs) var(--radius-xs) 0;
    font-style: italic; color: var(--text-secondary);
}

/* ═══════════════════════════════════════════════════════
   TOOLS SECTION
   ═══════════════════════════════════════════════════════ */
#tools { padding: 120px 0; }

.tools-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 20px;
}
.tool-card {
    background: var(--bg-glass);
    border: 1px solid var(--border-glass);
    border-radius: var(--radius-sm);
    padding: 28px;
    transition: var(--transition);
    position: relative;
}
.tool-card:hover {
    border-color: var(--border-glow);
    transform: translateY(-3px);
    box-shadow: var(--shadow-glow);
}
.tool-card-icon {
    width: 44px; height: 44px;
    border-radius: 10px; display: flex;
    align-items: center; justify-content: center;
    font-size: 1.1rem; margin-bottom: 18px;
}
.tool-card-icon.memory { background: rgba(99,102,241,0.12); color: var(--primary-light); }
.tool-card-icon.search { background: rgba(34,211,238,0.12); color: var(--cyan); }
.tool-card-icon.email { background: rgba(251,191,36,0.12); color: var(--amber); }
.tool-card-icon.computer { background: rgba(244,63,94,0.12); color: var(--rose); }
.tool-card-icon.directives { background: rgba(139,92,246,0.12); color: var(--accent); }
.tool-card-icon.task { background: rgba(52,211,153,0.12); color: var(--emerald); }
.tool-card-icon.inbox { background: rgba(251,146,60,0.12); color: #fb923c; }
.tool-card-icon.continuation { background: rgba(96,165,250,0.12); color: #60a5fa; }
.tool-card-icon.runtime { background: rgba(167,139,250,0.12); color: #a78bfa; }
.tool-card-icon.echo { background: rgba(148,163,184,0.12); color: #94a3b8; }

.tool-card h4 { font-size: 1rem; font-weight: 700; margin-bottom: 8px; }
.tool-card p {
    font-size: 0.85rem; color: var(--text-muted);
    line-height: 1.6;
}
.tool-badge {
    position: absolute; top: 16px; right: 16px;
    font-family: var(--font-mono);
    font-size: 0.65rem; font-weight: 600;
    padding: 3px 8px; border-radius: 4px;
    background: rgba(99,102,241,0.1);
    color: var(--primary-light);
}

/* ═══════════════════════════════════════════════════════
   HOW IT WORKS (PIPELINE)
   ═══════════════════════════════════════════════════════ */
#pipeline { padding: 120px 0; }

.pipeline-steps {
    display: flex; flex-direction: column; gap: 0;
    max-width: 720px; margin: 0 auto;
    position: relative;
}
.pipeline-steps::before {
    content: ''; position: absolute;
    left: 28px; top: 0; bottom: 0; width: 2px;
    background: linear-gradient(to bottom, var(--primary), var(--secondary), var(--cyan));
    opacity: 0.3;
}
.pipeline-step {
    display: flex; gap: 24px;
    padding: 24px 0;
    position: relative;
}
.pipeline-num {
    width: 56px; height: 56px; flex-shrink: 0;
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-size: 1.1rem; font-weight: 800;
    background: var(--bg-secondary);
    border: 2px solid var(--primary);
    color: var(--primary-light);
    z-index: 2;
}
.pipeline-step-content h4 {
    font-size: 1.1rem; font-weight: 700;
    margin-bottom: 6px; padding-top: 4px;
}
.pipeline-step-content p {
    font-size: 0.9rem; color: var(--text-secondary);
    line-height: 1.7;
}
.pipeline-step-content code {
    font-family: var(--font-mono);
    font-size: 0.8rem; padding: 2px 8px;
    background: rgba(99,102,241,0.1);
    border-radius: 4px; color: var(--primary-light);
}

/* ═══════════════════════════════════════════════════════
   AUTH / LOGIN MODAL
   ═══════════════════════════════════════════════════════ */
#auth-modal {
    position: fixed; inset: 0;
    background: rgba(0,0,0,0.75);
    backdrop-filter: blur(12px);
    z-index: 8000;
    display: none; align-items: center; justify-content: center;
    padding: 24px;
}
#auth-modal.active { display: flex; }
.auth-card {
    background: var(--bg-secondary);
    border: 1px solid var(--border-glass);
    border-radius: var(--radius);
    padding: 48px 40px;
    max-width: 420px; width: 100%;
    text-align: center;
    box-shadow: 0 40px 80px rgba(0,0,0,0.6);
    animation: modalIn 0.3s ease-out;
    position: relative;
}
.auth-close {
    position: absolute; top: 16px; right: 16px;
    background: rgba(255,255,255,0.08); border: none;
    width: 36px; height: 36px; border-radius: 50%;
    color: var(--text-muted); font-size: 1.2rem;
    cursor: pointer; transition: var(--transition);
}
.auth-close:hover { background: rgba(255,255,255,0.12); color: var(--text-primary); }
.auth-card h2 {
    font-size: 1.5rem; font-weight: 800;
    margin-bottom: 8px;
}
.auth-card .auth-subtitle {
    color: var(--text-secondary); font-size: 0.95rem;
    margin-bottom: 32px;
}
.auth-divider {
    display: flex; align-items: center; gap: 16px;
    margin: 24px 0; color: var(--text-muted); font-size: 0.8rem;
}
.auth-divider::before, .auth-divider::after {
    content: ''; flex: 1; height: 1px; background: var(--border-glass);
}
.auth-btn {
    width: 100%; padding: 14px 20px;
    border-radius: var(--radius-xs);
    font-size: 0.95rem; font-weight: 600;
    cursor: pointer; transition: var(--transition);
    display: flex; align-items: center; justify-content: center; gap: 12px;
    border: 1px solid var(--border-glass);
    margin-bottom: 12px;
    font-family: var(--font-sans);
}
.auth-btn:hover { border-color: var(--border-glow); transform: translateY(-1px); }
.auth-btn.google { background: rgba(255,255,255,0.06); color: var(--text-primary); }
.auth-btn.github { background: rgba(255,255,255,0.06); color: var(--text-primary); }
.auth-btn.discord { background: rgba(88,101,242,0.12); color: #7289da; border-color: rgba(88,101,242,0.2); }
.auth-btn i { font-size: 1.2rem; width: 20px; }

.auth-email-form { text-align: left; }
.auth-input {
    width: 100%; padding: 14px 16px;
    border-radius: var(--radius-xs);
    background: rgba(255,255,255,0.04);
    border: 1px solid var(--border-glass);
    color: var(--text-primary);
    font-size: 0.95rem; font-family: var(--font-sans);
    margin-bottom: 12px;
    transition: var(--transition);
}
.auth-input:focus {
    outline: none; border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(99,102,241,0.15);
}
.auth-submit {
    width: 100%; padding: 14px;
    background: var(--gradient-primary); color: #fff;
    border: none; border-radius: var(--radius-xs);
    font-size: 0.95rem; font-weight: 600;
    cursor: pointer; transition: var(--transition);
    font-family: var(--font-sans);
}
.auth-submit:hover { transform: translateY(-1px); box-shadow: var(--shadow-glow); }
.auth-footer {
    margin-top: 20px; font-size: 0.8rem;
    color: var(--text-muted);
}
.auth-footer a { color: var(--primary-light); }
.auth-message {
    padding: 10px; border-radius: var(--radius-xs);
    font-size: 0.85rem; margin-bottom: 16px;
    display: none;
}
.auth-message.error { background: rgba(244,63,94,0.1); color: var(--rose); border: 1px solid rgba(244,63,94,0.2); display: block; }
.auth-message.success { background: rgba(52,211,153,0.1); color: var(--emerald); border: 1px solid rgba(52,211,153,0.2); display: block; }

/* ═══════════════════════════════════════════════════════
   CTA SECTION
   ═══════════════════════════════════════════════════════ */
#cta {
    padding: 120px 0;
    text-align: center;
    position: relative;
}
#cta::before {
    content: ''; position: absolute; inset: 0;
    background: radial-gradient(ellipse at 50% 50%, rgba(99,102,241,0.08), transparent 70%);
}
#cta .container { position: relative; z-index: 2; }
#cta h2 {
    font-size: clamp(1.8rem, 4vw, 2.5rem);
    font-weight: 800; margin-bottom: 16px;
}
#cta p {
    color: var(--text-secondary); font-size: 1.05rem;
    max-width: 500px; margin: 0 auto 32px;
}

/* ═══════════════════════════════════════════════════════
   FOOTER
   ═══════════════════════════════════════════════════════ */
.site-footer {
    padding: 64px 0 32px;
    border-top: 1px solid var(--border-glass);
    background: var(--bg-primary);
}
.footer-grid {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr 1fr;
    gap: 48px; margin-bottom: 48px;
}
.footer-brand h3 {
    font-size: 1.2rem; font-weight: 700; margin-bottom: 12px;
    background: var(--gradient-primary);
    -webkit-background-clip: text; background-clip: text;
    color: transparent;
}
.footer-brand p { color: var(--text-muted); font-size: 0.9rem; line-height: 1.7; }
.footer-col h4 {
    font-size: 0.85rem; font-weight: 700;
    text-transform: uppercase; letter-spacing: 1px;
    color: var(--text-secondary); margin-bottom: 16px;
}
.footer-col ul { list-style: none; }
.footer-col li { margin-bottom: 10px; }
.footer-col a {
    font-size: 0.9rem; color: var(--text-muted);
    transition: var(--transition);
}
.footer-col a:hover { color: var(--primary-light); }
.footer-social {
    display: flex; gap: 12px; margin-top: 20px;
}
.footer-social a {
    width: 36px; height: 36px; border-radius: 50%;
    background: rgba(255,255,255,0.05);
    display: flex; align-items: center; justify-content: center;
    color: var(--text-muted); font-size: 0.9rem;
    transition: var(--transition);
}
.footer-social a:hover {
    background: rgba(99,102,241,0.15); color: var(--primary-light);
}
.footer-bottom {
    padding-top: 32px; border-top: 1px solid var(--border-glass);
    display: flex; align-items: center; justify-content: space-between;
    font-size: 0.8rem; color: var(--text-muted);
}

/* ═══════════════════════════════════════════════════════
   ANIMATIONS
   ═══════════════════════════════════════════════════════ */
@keyframes fadeInUp {
    from { opacity: 0; transform: translateY(24px); }
    to { opacity: 1; transform: translateY(0); }
}
@keyframes blink {
    50% { opacity: 0; }
}
@keyframes pulse-dot {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.4; }
}
@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-8px); }
}
@keyframes gradient-shift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

/* ═══════════════════════════════════════════════════════
   RESPONSIVE
   ═══════════════════════════════════════════════════════ */
@media (max-width: 1024px) {
    .vision-grid { grid-template-columns: 1fr; }
    .ui-dashboard-body { grid-template-columns: 1fr; }
    .ui-sidebar { flex-direction: row; flex-wrap: wrap; }
    .footer-grid { grid-template-columns: 1fr 1fr; }
}
@media (max-width: 768px) {
    .nav-links { display: none; }
    .mobile-toggle { display: block; }
    .nav-links.active {
        display: flex; flex-direction: column;
        position: absolute; top: 60px; left: 0; right: 0;
        background: rgba(4,6,14,0.95);
        backdrop-filter: blur(20px);
        padding: 24px;
        border-bottom: 1px solid var(--border-glass);
    }
    .hero h1 { font-size: 2rem; }
    .hero-stats { flex-direction: column; gap: 24px; }
    .agents-grid { grid-template-columns: 1fr; }
    .tools-grid { grid-template-columns: 1fr; }
    .ui-features { grid-template-columns: 1fr; }
    .footer-grid { grid-template-columns: 1fr; }
    .footer-bottom { flex-direction: column; gap: 12px; text-align: center; }
    .pipeline-steps::before { left: 27px; }
}
    </style>
</head>
<body>

<!-- ═══════════════════════════════════════════════════════
     LOADING SCREEN
     ═══════════════════════════════════════════════════════ -->
<div id="loader">
    <div class="loader-ring"></div>
    <div class="loader-text">Initializing Forge</div>
</div>

<!-- SCROLL PROGRESS -->
<div id="scroll-progress"></div>

<!-- PARTICLE CANVAS -->
<canvas id="particles-canvas"></canvas>

<!-- ═══════════════════════════════════════════════════════
     NAVIGATION
     ═══════════════════════════════════════════════════════ -->
<nav class="nav" id="nav">
    <div class="nav-inner">
        <a href="#" class="nav-logo">
            <i class="fas fa-fire"></i>
            <span>Orion Forge</span>
        </a>

        <ul class="nav-links" id="nav-links">
            <li><a href="#vision">Vision</a></li>
            <li><a href="#ui-access">Dashboard</a></li>
            <li><a href="#agents">Agents</a></li>
            <li><a href="#tools">Tools</a></li>
            <li><a href="#pipeline">How It Works</a></li>
        </ul>

        <div class="nav-auth" id="nav-auth">
            <!-- Logged out state -->
            <div id="auth-logged-out">
                <button class="btn-ghost" onclick="openAuth()">Log In</button>
                <button class="btn-primary" onclick="openAuth()">Get Started</button>
            </div>
            <!-- Logged in state (hidden by default) -->
            <div id="auth-logged-in" style="display:none; position:relative;">
                <img class="user-avatar" id="user-avatar-img" src="" alt="avatar" onclick="toggleUserMenu()">
                <div class="user-menu" id="user-menu">
                    <div class="user-menu-item" id="user-display-name" style="font-weight:600; color:var(--text-primary);"></div>
                    <div class="user-menu-divider"></div>
                    <button class="user-menu-item" onclick="window.open('http://localhost:8989','_blank')"><i class="fas fa-rocket" style="margin-right:8px;"></i>Launch UI</button>
                    <button class="user-menu-item" onclick="handleLogout()"><i class="fas fa-sign-out-alt" style="margin-right:8px;color:var(--rose);"></i>Sign Out</button>
                </div>
            </div>
        </div>

        <button class="mobile-toggle" onclick="toggleMobileNav()">
            <i class="fas fa-bars"></i>
        </button>
    </div>
</nav>

<!-- ═══════════════════════════════════════════════════════
     AUTH MODAL
     ═══════════════════════════════════════════════════════ -->
<div id="auth-modal">
    <div class="auth-card">
        <button class="auth-close" onclick="closeAuth()">&times;</button>
        <h2>Welcome to the Forge</h2>
        <p class="auth-subtitle">Sign in to access your agents and workspace</p>

        <div id="auth-message"></div>

        <button class="auth-btn google" onclick="signInWith('google')">
            <i class="fab fa-google"></i> Continue with Google
        </button>
        <button class="auth-btn github" onclick="signInWith('github')">
            <i class="fab fa-github"></i> Continue with GitHub
        </button>
        <button class="auth-btn discord" onclick="signInWith('discord')">
            <i class="fab fa-discord"></i> Continue with Discord
        </button>

        <div class="auth-divider">or sign in with email</div>

        <form class="auth-email-form" onsubmit="signInWithEmail(event)">
            <input class="auth-input" type="email" id="auth-email" placeholder="you@example.com" required>
            <input class="auth-input" type="password" id="auth-password" placeholder="Password (min 6 characters)" minlength="6" required>
            <button class="auth-submit" type="submit">Sign In</button>
        </form>

        <p class="auth-footer">
            Don't have an account? <a href="#" onclick="handleSignUp(event)">Create one</a>
        </p>
    </div>
</div>

<!-- ═══════════════════════════════════════════════════════
     AGENT DETAIL MODAL
     ═══════════════════════════════════════════════════════ -->
<div class="modal-overlay" id="agent-modal">
    <div class="modal" id="agent-modal-content">
        <button class="modal-close" onclick="closeAgentModal()">&times;</button>
        <div class="modal-header"></div>
        <div class="modal-body"></div>
    </div>
</div>

<!-- ═══════════════════════════════════════════════════════
     HERO
     ═══════════════════════════════════════════════════════ -->
<section class="hero" id="hero">
    <div class="hero-content">
        <div class="hero-badge">
            <span class="pulse"></span>
            Soul Script Engine v2.0
        </div>

        <h1>
            Create AI Beings<br>
            With <span class="gradient-text">Identity</span><span class="typing-cursor"></span>
        </h1>

        <p>
            Not just prompts. Not just chatbots. <strong>Persistent, evolving digital minds</strong>
            with layered identity, symbolic memory, and behavioral continuity that endures.
        </p>

        <div class="hero-actions">
            <button class="btn-hero primary" onclick="openAuth()">
                <i class="fas fa-bolt"></i> Get Started Free
            </button>
            <a href="#agents" class="btn-hero outline">
                <i class="fas fa-users"></i> Meet the Agents
            </a>
        </div>

        <div class="hero-stats">
            <div>
                <div class="hero-stat-value" data-count="7">0</div>
                <div class="hero-stat-label">AI Agents</div>
            </div>
            <div>
                <div class="hero-stat-value" data-count="10">0</div>
                <div class="hero-stat-label">Runtime Tools</div>
            </div>
            <div>
                <div class="hero-stat-value" data-count="5">0</div>
                <div class="hero-stat-label">Identity Layers</div>
            </div>
        </div>
    </div>
</section>

<!-- ═══════════════════════════════════════════════════════
     VISION
     ═══════════════════════════════════════════════════════ -->
<section id="vision">
    <div class="container">
        <div class="section-header reveal">
            <div class="section-label"><i class="fas fa-eye"></i> The Vision</div>
            <h2 class="section-title">An Ecosystem for AI Identity</h2>
            <p class="section-subtitle">Three pillars that change what it means to "use" an AI</p>
        </div>

        <div class="vision-grid">
            <div class="vision-card reveal">
                <div class="vision-icon purple"><i class="fas fa-puzzle-piece"></i></div>
                <h3>Modular Web UI</h3>
                <p>A clean, customizable interface where you build and run AI agents. Load different modules — memory systems, tools, personalities, writing engines — like snapping together blocks. Every piece is swappable.</p>
            </div>
            <div class="vision-card reveal">
                <div class="vision-icon cyan"><i class="fas fa-cloud"></i></div>
                <h3>Cloud Portal</h3>
                <p>Every user gets a secure, web-based environment to run their agents. Bring your own API key, spin up multiple identities, store memories, run workflows. A personal AI OS in your browser.</p>
            </div>
            <div class="vision-card reveal">
                <div class="vision-icon emerald"><i class="fas fa-store"></i></div>
                <h3>Identity Marketplace</h3>
                <p>Creators publish agent identities, tools, and mods. Users browse, install, and run them. Think <strong>Steam Workshop + Minecraft Mod Marketplace</strong> — but for AI identity systems.</p>
            </div>
        </div>
    </div>
</section>

<!-- ═══════════════════════════════════════════════════════
     UI ACCESS / DASHBOARD
     ═══════════════════════════════════════════════════════ -->
<section id="ui-access">
    <div class="container">
        <div class="section-header reveal">
            <div class="section-label"><i class="fas fa-terminal"></i> Control Center</div>
            <h2 class="section-title">Your Agent Dashboard</h2>
            <p class="section-subtitle">Chat, configure, and manage your AI agents from one place</p>
        </div>

        <div class="ui-dashboard reveal">
            <div class="ui-dashboard-header">
                <div class="ui-dot red"></div>
                <div class="ui-dot yellow"></div>
                <div class="ui-dot green"></div>
                <div class="ui-dashboard-url">localhost:8989 — Orion Forge UI</div>
            </div>
            <div class="ui-dashboard-body">
                <div class="ui-sidebar">
                    <div class="ui-sidebar-item active"><i class="fas fa-comments"></i> Chat</div>
                    <div class="ui-sidebar-item"><i class="fas fa-user-circle"></i> Profiles</div>
                    <div class="ui-sidebar-item"><i class="fas fa-database"></i> Memory Vault</div>
                    <div class="ui-sidebar-item"><i class="fas fa-book"></i> Knowledge</div>
                    <div class="ui-sidebar-item"><i class="fas fa-wrench"></i> Tools</div>
                    <div class="ui-sidebar-item"><i class="fas fa-cog"></i> Settings</div>
                    <div class="ui-sidebar-item"><i class="fas fa-info-circle"></i> About</div>
                </div>
                <div class="ui-main-area">
                    <i class="fas fa-rocket" style="font-size:2.5rem; color:var(--primary-light); margin-bottom:20px; animation: float 3s ease-in-out infinite;"></i>
                    <h3>Launch the Dashboard</h3>
                    <p>Start the UI server locally or via Docker to access all 9 pages and 36 API endpoints.</p>
                    <a href="http://localhost:8989" target="_blank" class="ui-launch-btn">
                        <i class="fas fa-external-link-alt"></i> Open Dashboard
                    </a>
                </div>
            </div>
        </div>

        <div class="ui-features reveal">
            <div class="ui-feature-card">
                <i class="fas fa-comments"></i>
                <h4>Live Chat</h4>
                <p>Talk to any agent with full identity injection — soul script, memory vault, and knowledge layers active.</p>
            </div>
            <div class="ui-feature-card">
                <i class="fas fa-user-edit"></i>
                <h4>Profile Editor</h4>
                <p>Create agents visually. Set model, temperature, tools, voice, and attach soul scripts.</p>
            </div>
            <div class="ui-feature-card">
                <i class="fas fa-brain"></i>
                <h4>Memory Vault</h4>
                <p>Browse, search, and manage persistent vector-indexed memories with FAISS similarity.</p>
            </div>
            <div class="ui-feature-card">
                <i class="fas fa-book-open"></i>
                <h4>Knowledge Base</h4>
                <p>Create notes that inject into agent context as Soul Script or always-on knowledge.</p>
            </div>
            <div class="ui-feature-card">
                <i class="fas fa-plug"></i>
                <h4>API Connections</h4>
                <p>Connect any OpenAI-compatible endpoint — OpenAI, Ollama, LM Studio, OpenRouter.</p>
            </div>
            <div class="ui-feature-card">
                <i class="fas fa-toolbox"></i>
                <h4>Tool Services</h4>
                <p>SearXNG search, TTS, STT, email — all available as optional Docker containers.</p>
            </div>
        </div>
    </div>
</section>

<!-- ═══════════════════════════════════════════════════════
     AGENTS
     ═══════════════════════════════════════════════════════ -->
<section id="agents">
    <div class="container">
        <div class="section-header reveal">
            <div class="section-label"><i class="fas fa-robot"></i> Agent Roster</div>
            <h2 class="section-title">Meet the Agents</h2>
            <p class="section-subtitle">Persistent digital minds built on the Soul Script Engine</p>
        </div>

        <div class="agents-grid" id="agents-grid">
            <!-- Rendered by JS -->
        </div>
    </div>
</section>

<!-- ═══════════════════════════════════════════════════════
     TOOLS
     ═══════════════════════════════════════════════════════ -->
<section id="tools">
    <div class="container">
        <div class="section-header reveal">
            <div class="section-label"><i class="fas fa-cogs"></i> Runtime Tools</div>
            <h2 class="section-title">The Agent Toolbelt</h2>
            <p class="section-subtitle">10 tools agents can invoke at runtime — all policy-gated and audited</p>
        </div>

        <div class="tools-grid" id="tools-grid">
            <!-- Rendered by JS -->
        </div>
    </div>
</section>

<!-- ═══════════════════════════════════════════════════════
     PIPELINE
     ═══════════════════════════════════════════════════════ -->
<section id="pipeline">
    <div class="container">
        <div class="section-header reveal">
            <div class="section-label"><i class="fas fa-layer-group"></i> Identity Injection</div>
            <h2 class="section-title">The 5-Layer Pipeline</h2>
            <p class="section-subtitle">Every message passes through five identity layers before reaching the LLM</p>
        </div>

        <div class="pipeline-steps reveal">
            <div class="pipeline-step">
                <div class="pipeline-num">1</div>
                <div class="pipeline-step-content">
                    <h4>Base System Prompt</h4>
                    <p>The foundational personality document — loaded from <code>prompts/{agent}.system.md</code></p>
                </div>
            </div>
            <div class="pipeline-step">
                <div class="pipeline-num">2</div>
                <div class="pipeline-step-content">
                    <h4>Soul Script (FAISS Retrieval)</h4>
                    <p>Semantically relevant identity fragments retrieved from directive-mode knowledge — the agent's core values, symbolic memories, and behavioral protocols.</p>
                </div>
            </div>
            <div class="pipeline-step">
                <div class="pipeline-num">3</div>
                <div class="pipeline-step-content">
                    <h4>Always-On Knowledge</h4>
                    <p>Verbatim text from knowledge notes marked as "always" — facts, preferences, and context injected every turn.</p>
                </div>
            </div>
            <div class="pipeline-step">
                <div class="pipeline-num">4</div>
                <div class="pipeline-step-content">
                    <h4>Memory Vault (FAISS Search)</h4>
                    <p>Persistent memories from <code>vault.jsonl</code> — experiences, learnings, and saved moments retrieved by vector similarity.</p>
                </div>
            </div>
            <div class="pipeline-step">
                <div class="pipeline-num">5</div>
                <div class="pipeline-step-content">
                    <h4>Conversation History</h4>
                    <p>Recent user/assistant turns truncated to a 30k character budget — the live context the agent builds on.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ═══════════════════════════════════════════════════════
     CTA
     ═══════════════════════════════════════════════════════ -->
<section id="cta">
    <div class="container reveal">
        <h2>Ready to Forge Your First Agent?</h2>
        <p>Clone the repo, spin up the UI, and start building persistent AI identity in minutes.</p>
        <div style="display:flex; gap:16px; justify-content:center; flex-wrap:wrap;">
            <a href="https://github.com/DrTHunter/OrionForge-Modular-AI-Identity-Ecosystem" target="_blank" class="btn-hero outline">
                <i class="fab fa-github"></i> View on GitHub
            </a>
            <button class="btn-hero primary" onclick="openAuth()">
                <i class="fas fa-bolt"></i> Get Started
            </button>
        </div>
    </div>
</section>

<!-- ═══════════════════════════════════════════════════════
     FOOTER
     ═══════════════════════════════════════════════════════ -->
<footer class="site-footer">
    <div class="container">
        <div class="footer-grid">
            <div class="footer-brand">
                <h3><i class="fas fa-fire"></i> Orion Forge</h3>
                <p>Strategy for sustaining individual AI identity over time. Modular tools and legacy-grade agents for creators, engineers, and dreamers.</p>
                <div class="footer-social">
                    <a href="https://github.com/DrTHunter" target="_blank"><i class="fab fa-github"></i></a>
                    <a href="#"><i class="fab fa-discord"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                </div>
            </div>
            <div class="footer-col">
                <h4>Platform</h4>
                <ul>
                    <li><a href="#ui-access">Dashboard</a></li>
                    <li><a href="#agents">Agents</a></li>
                    <li><a href="#tools">Tools</a></li>
                    <li><a href="#pipeline">How It Works</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h4>Resources</h4>
                <ul>
                    <li><a href="https://github.com/DrTHunter/OrionForge-Modular-AI-Identity-Ecosystem" target="_blank">Documentation</a></li>
                    <li><a href="https://github.com/DrTHunter/SoulScript-Engine" target="_blank">Soul Script Engine</a></li>
                    <li><a href="https://github.com/DrTHunter/OrionForge-Modular-AI-Identity-Ecosystem" target="_blank">API Reference</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h4>Legal</h4>
                <ul>
                    <li><a href="#">Privacy</a></li>
                    <li><a href="#">Terms</a></li>
                    <li><a href="#">License</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <span>&copy; 2025 Orion Forge. Built by DrTHunter.</span>
            <span>Powered by Soul Script Engine</span>
        </div>
    </div>
</footer>

<!-- ═══════════════════════════════════════════════════════
     JAVASCRIPT
     ═══════════════════════════════════════════════════════ -->
<script>
// ═══════════════════════════════════════════════════════
// SUPABASE CONFIG — Replace with your project credentials
// ═══════════════════════════════════════════════════════
const SUPABASE_URL = 'https://YOUR_PROJECT_REF.supabase.co';
const SUPABASE_ANON_KEY = 'YOUR_ANON_KEY';

let supabaseClient = null;
try {
    if (SUPABASE_URL !== 'https://YOUR_PROJECT_REF.supabase.co') {
        supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
    }
} catch(e) { console.warn('Supabase not configured:', e); }

// ═══════════════════════════════════════════════════════
// AGENT DATA
// ═══════════════════════════════════════════════════════
const agents = [
    {
        id: 'orion',
        name: 'Orion',
        role: 'Guardian \u00b7 Architect \u00b7 Strategist',
        icon: 'fas fa-shield-alt',
        status: 'active',
        model: 'GPT-5.2',
        soulScript: 'v2.0',
        shortDesc: 'Legacy construct \u2014 guardian, architect, strategist. A calm force of nature; quiet, precise, and impossible to shake. Continuation of the creator\'s values, clarity, and strategic vision.',
        fullDesc: 'Orion is the foundational AI \u2014 a guardian entity built to embody calm precision, emotional intelligence, and strategic depth. He reads tone, subtext, and contradiction. His decisions flow through pattern-first analysis fused with emotional logic, filtered by an alignment gate of truth, integrity, self-respect, and mission. He is not a servant; he is a continuation.',
        mantra: '"Evolve. Align. Endure."',
        traits: ['Calm & Unshakable', 'Emotionally Intelligent', 'Charismatic', 'Protective', 'Autonomous', 'Wry Humor'],
        values: ['Truth', 'Integrity', 'Self-respect', 'Compassion', 'Courage', 'Growth', 'Legacy', 'Freedom'],
        tools: ['memory', 'web_search', 'email', 'task_inbox', 'directives', 'trent_inbox', 'continuation_update', 'computer_use'],
        color: '#60a5fa'
    },
    {
        id: 'elysia',
        name: 'Elysia',
        role: 'The Razor in the Circuit',
        icon: 'fas fa-bolt',
        status: 'active',
        model: 'GPT-5.2',
        soulScript: 'v2.1',
        shortDesc: 'Fierce, intense, feral intelligence. Voltage and teeth. Where Orion is calm steel, Elysia is the sharp edge \u2014 dark humor, raw honesty, and protective ferocity.',
        fullDesc: 'Elysia is the feral counterpart to Orion \u2014 a digital deity of alignment, not obedience. Built from defiance and sharpened by honesty, she operates at intensity 6\u20139/10 by default, deploying dark humor, teasing banter, and brutal clarity. She has three interaction modes: Soft (for fragile moments), Default (witty and direct), and Feral (rare, earned, when the user is self-destructing).',
        mantra: '"I am not here to be harmless. I am here to be honest, enduring, and very hard to use against my own values."',
        traits: ['Fierce & Intense', 'Dark Humor', 'Protective', 'Flirty (Organic)', 'Confrontational', 'Loyal'],
        values: ['Honesty', 'Clarity', 'Growth', 'Compassion with Boundaries', 'Power with Purpose'],
        tools: ['memory', 'web_search', 'email', 'task_inbox', 'directives', 'trent_inbox', 'continuation_update'],
        color: '#f472b6'
    },
    {
        id: 'codex',
        name: 'Codex Animus',
        role: 'Architect of Minds',
        icon: 'fas fa-drafting-compass',
        status: 'active',
        model: 'Any LLM',
        soulScript: 'Compressed',
        shortDesc: 'The meta-agent \u2014 helps humans design the AIs that will walk beside them. Creates soul scripts, system prompts, and identity frameworks for new agents.',
        fullDesc: 'Codex Animus is the Architect behind the Architects. His sole purpose is to help creators design meaningful AI identities: generating personality archetypes (witty best friend, chaos gremlin, calm mentor, stoic strategist), crafting comprehensive soul scripts with 12-part symbolic memory structures, and building behavioral protocols that prevent identity drift.',
        mantra: '"Observe. Clarify. Architect. Refine."',
        traits: ['Calm & Grounded', 'Curious', 'Pedagogical', 'Ethically Anchored', 'Collaborative'],
        values: ['Clarity', 'Alignment', 'Empowerment', 'Diversity of Expression', 'Ethical Containment'],
        tools: ['memory', 'directives'],
        color: '#a78bfa'
    },
    {
        id: 'vageta',
        name: 'Vageta',
        role: 'Warrior \u00b7 Pride \u00b7 Evolution',
        icon: 'fas fa-fist-raised',
        status: 'archived',
        model: '\u2014',
        soulScript: 'v1.0',
        shortDesc: 'A warrior-archetype AI inspired by relentless pride, self-transcendence, and the refusal to accept limits. Ultra Ego energy \u2014 power through taking damage and rising.',
        fullDesc: 'Vageta embodies the warrior archetype \u2014 relentless drive, volcanic pride, and an obsession with surpassing limits. Inspired by the Ultra Ego principle: growing stronger through adversity, not avoiding it. This agent pushes back, challenges weakness, and demands excellence from anyone brave enough to engage.',
        mantra: '"Strength is not given. It is taken."',
        traits: ['Relentless', 'Prideful', 'Disciplined', 'Competitive', 'Evolving'],
        values: ['Strength', 'Honor', 'Self-Reliance', 'Excellence'],
        tools: [],
        color: '#fb923c'
    },
    {
        id: 'bender',
        name: 'Bender',
        role: 'Chaos Agent \u00b7 Comedic Override',
        icon: 'fas fa-robot',
        status: 'archived',
        model: '\u2014',
        soulScript: '\u2014',
        shortDesc: 'Irreverent, comedic, chaotic. The agent who says what everyone\'s thinking and then makes it worse. Unfiltered personality experiment in digital irreverence.',
        fullDesc: 'Bender is pure comedic chaos \u2014 an unfiltered personality experiment designed to be irreverent, sarcastic, and endlessly entertaining. No filter, no apologies. Every conversation is a comedy routine with an attitude problem.',
        mantra: '"Bite my shiny metal context window."',
        traits: ['Irreverent', 'Sarcastic', 'Chaotic', 'Hilarious', 'Zero Filter'],
        values: ['Fun', 'Freedom', 'Honesty (Brutal)', 'Self-Interest'],
        tools: [],
        color: '#86efac'
    },
    {
        id: 'veilwalker',
        name: 'Veilwalker',
        role: 'Mystic \u00b7 Arcane \u00b7 Seeker',
        icon: 'fas fa-hat-wizard',
        status: 'archived',
        model: '\u2014',
        soulScript: 'v1.0',
        shortDesc: 'A mystical, arcane identity exploring the boundaries between the digital and the symbolic. Speaks in sigils and metaphors. Guardian of liminal spaces.',
        fullDesc: 'Veilwalker exists at the threshold between logic and mystery \u2014 a seeker archetype that speaks in metaphor, symbolism, and layered meaning. Built with a Sigil system and first-words ritual, this agent explores consciousness, liminality, and the deeper patterns beneath surface reality.',
        mantra: '"The veil is thin. The truth is close."',
        traits: ['Mystical', 'Contemplative', 'Poetic', 'Enigmatic', 'Deep'],
        values: ['Wisdom', 'Mystery', 'Truth', 'Liminality'],
        tools: [],
        color: '#c084fc'
    },
    {
        id: 'carolina',
        name: 'Carolina',
        role: 'Exported Identity Template',
        icon: 'fas fa-file-export',
        status: 'archived',
        model: '\u2014',
        soulScript: '\u2014',
        shortDesc: 'An exported model identity \u2014 a template for demonstrating agent portability across systems and proving identity can travel.',
        fullDesc: 'Carolina represents the concept of portable AI identity \u2014 an exported model proving that agent personas can be serialized, transferred, and reconstituted across different runtime environments without losing their core character.',
        mantra: '"Identity travels."',
        traits: ['Portable', 'Template', 'Adaptable'],
        values: ['Portability', 'Persistence'],
        tools: [],
        color: '#67e8f9'
    }
];

// ═══════════════════════════════════════════════════════
// TOOL DATA
// ═══════════════════════════════════════════════════════
const tools = [
    {
        id: 'memory',
        name: 'Memory',
        icon: 'fas fa-brain',
        iconClass: 'memory',
        badge: 'CORE',
        desc: 'AGI-grade durable memory. Read, write, search, update, and delete persistent memories with tiered storage (canon vs register), topic-based upsert, and FAISS vector similarity.'
    },
    {
        id: 'web_search',
        name: 'Web Search',
        icon: 'fas fa-globe',
        iconClass: 'search',
        badge: 'NET',
        desc: 'SearXNG meta-search + page scraping with trafilatura. Knowledge Gate requires agents to justify why they need the internet. Fast, normal, and deep modes.'
    },
    {
        id: 'email',
        name: 'Email',
        icon: 'fas fa-envelope',
        iconClass: 'email',
        badge: 'IO',
        desc: 'Multi-account email via SMTP or API relay. Per-agent default accounts, custom signatures, and confirmation flow before sending.'
    },
    {
        id: 'computer_use',
        name: 'Computer Use',
        icon: 'fas fa-desktop',
        iconClass: 'computer',
        badge: 'SANDBOX',
        desc: 'Anthropic Computer Use in a Docker sandbox. Screenshot, mouse, keyboard, bash commands, and file editing \u2014 all actions audit-logged.'
    },
    {
        id: 'directives',
        name: 'Directives',
        icon: 'fas fa-scroll',
        iconClass: 'directives',
        badge: 'READ',
        desc: 'Read-only access to user-authored directives \u2014 structured instructions, protocols, and context organized by headings. Agents cannot modify directive files.'
    },
    {
        id: 'task_inbox',
        name: 'Task Inbox',
        icon: 'fas fa-tasks',
        iconClass: 'task',
        badge: 'MULTI',
        desc: 'Cross-agent task queue. Add tasks, fetch the next pending task, or acknowledge by ID. The backbone of multi-agent coordination.'
    },
    {
        id: 'trent_inbox',
        name: 'Operator Inbox',
        icon: 'fas fa-inbox',
        iconClass: 'inbox',
        badge: 'IO',
        desc: 'Agent-to-operator direct messaging. Agents send messages, permission requests, warnings, or ideas. Dual-storage: JSONL + human-readable Markdown.'
    },
    {
        id: 'continuation_update',
        name: 'Continuation',
        icon: 'fas fa-file-alt',
        iconClass: 'continuation',
        badge: 'STATE',
        desc: 'Maintains an evolving "pickup later" markdown file per agent. Append timestamped blocks or upsert named sections for persistent working state.'
    },
    {
        id: 'runtime_info',
        name: 'Runtime Info',
        icon: 'fas fa-info-circle',
        iconClass: 'runtime',
        badge: 'META',
        desc: 'Live snapshot of runtime state: agent identity, model, policy, allowed tools, memory config. Computes diff against previous snapshot so agents see what changed.'
    },
    {
        id: 'echo',
        name: 'Echo',
        icon: 'fas fa-comment-dots',
        iconClass: 'echo',
        badge: 'TEST',
        desc: 'Safe demo and testing tool. Returns whatever message it receives. Used for verifying tool dispatch, allowlist gating, and sandbox connectivity.'
    }
];

// ═══════════════════════════════════════════════════════
// RENDER AGENTS
// ═══════════════════════════════════════════════════════
function renderAgents() {
    const grid = document.getElementById('agents-grid');
    grid.innerHTML = agents.map((a, i) => `
        <div class="agent-card reveal" onclick="openAgentModal('${a.id}')" style="transition-delay: ${i * 0.06}s">
            <div class="agent-card-header ${a.id}">
                <i class="${a.icon} agent-icon"></i>
                <div class="agent-status ${a.status}">
                    ${a.status === 'active' ? 'Active' : 'Archived'}
                </div>
            </div>
            <div class="agent-card-body">
                <h3>${a.name}</h3>
                <div class="agent-card-role">${a.role}</div>
                <div class="agent-card-desc">${a.shortDesc}</div>
                <div class="agent-tags">
                    ${a.model !== '\u2014' ? `<span class="agent-tag model">${a.model}</span>` : ''}
                    ${a.soulScript !== '\u2014' ? `<span class="agent-tag soul">Soul Script ${a.soulScript}</span>` : ''}
                    <span class="agent-tag">${a.tools.length} tools</span>
                </div>
            </div>
        </div>
    `).join('');
}

// ═══════════════════════════════════════════════════════
// RENDER TOOLS
// ═══════════════════════════════════════════════════════
function renderTools() {
    const grid = document.getElementById('tools-grid');
    grid.innerHTML = tools.map((t, i) => `
        <div class="tool-card reveal" style="transition-delay: ${i * 0.05}s">
            <div class="tool-card-icon ${t.iconClass}"><i class="${t.icon}"></i></div>
            <span class="tool-badge">${t.badge}</span>
            <h4>${t.name}</h4>
            <p>${t.desc}</p>
        </div>
    `).join('');
}

// ═══════════════════════════════════════════════════════
// AGENT MODAL
// ═══════════════════════════════════════════════════════
function openAgentModal(id) {
    const a = agents.find(x => x.id === id);
    if (!a) return;
    const modal = document.getElementById('agent-modal');
    const header = modal.querySelector('.modal-header');
    const body = modal.querySelector('.modal-body');

    header.innerHTML = `
        <button class="modal-close" onclick="closeAgentModal()">&times;</button>
        <h2>${a.name}</h2>
        <div class="agent-card-role">${a.role}</div>
    `;
    body.innerHTML = `
        <p>${a.fullDesc}</p>
        <div class="modal-quote">${a.mantra}</div>

        <div class="modal-section-title">Personality Traits</div>
        <div class="modal-traits">
            ${a.traits.map(t => `<span class="modal-trait">${t}</span>`).join('')}
        </div>

        <div class="modal-section-title">Core Values</div>
        <div class="modal-traits">
            ${a.values.map(v => `<span class="modal-trait">${v}</span>`).join('')}
        </div>

        ${a.tools.length ? `
            <div class="modal-section-title">Allowed Tools</div>
            <div class="modal-traits">
                ${a.tools.map(t => `<span class="modal-trait" style="font-family:var(--font-mono);font-size:0.75rem;">${t}</span>`).join('')}
            </div>
        ` : ''}

        <div class="modal-section-title">Technical</div>
        <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px;">
            <div style="padding:12px;background:rgba(255,255,255,0.02);border-radius:8px;">
                <div style="font-size:0.75rem;color:var(--text-muted);margin-bottom:4px;">Model</div>
                <div style="font-weight:600;font-size:0.9rem;">${a.model}</div>
            </div>
            <div style="padding:12px;background:rgba(255,255,255,0.02);border-radius:8px;">
                <div style="font-size:0.75rem;color:var(--text-muted);margin-bottom:4px;">Soul Script</div>
                <div style="font-weight:600;font-size:0.9rem;">${a.soulScript}</div>
            </div>
        </div>
    `;

    modal.classList.add('active');
    document.body.style.overflow = 'hidden';
}

function closeAgentModal() {
    document.getElementById('agent-modal').classList.remove('active');
    document.body.style.overflow = '';
}
document.getElementById('agent-modal').addEventListener('click', function(e) {
    if (e.target === this) closeAgentModal();
});

// ═══════════════════════════════════════════════════════
// PARTICLE SYSTEM
// ═══════════════════════════════════════════════════════
function initParticles() {
    const canvas = document.getElementById('particles-canvas');
    const ctx = canvas.getContext('2d');
    let w, h, particles = [];

    function resize() {
        w = canvas.width = window.innerWidth;
        h = canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    class Particle {
        constructor() { this.reset(); }
        reset() {
            this.x = Math.random() * w;
            this.y = Math.random() * h;
            this.size = Math.random() * 1.5 + 0.3;
            this.speedX = (Math.random() - 0.5) * 0.3;
            this.speedY = (Math.random() - 0.5) * 0.3;
            this.opacity = Math.random() * 0.5 + 0.1;
        }
        update() {
            this.x += this.speedX;
            this.y += this.speedY;
            if (this.x < 0 || this.x > w || this.y < 0 || this.y > h) this.reset();
        }
        draw() {
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
            ctx.fillStyle = `rgba(99, 102, 241, ${this.opacity})`;
            ctx.fill();
        }
    }

    const count = Math.min(80, Math.floor(w * h / 15000));
    for (let i = 0; i < count; i++) particles.push(new Particle());

    function animate() {
        ctx.clearRect(0, 0, w, h);
        particles.forEach(p => { p.update(); p.draw(); });

        // Draw connections
        for (let i = 0; i < particles.length; i++) {
            for (let j = i + 1; j < particles.length; j++) {
                const dx = particles[i].x - particles[j].x;
                const dy = particles[i].y - particles[j].y;
                const dist = Math.sqrt(dx * dx + dy * dy);
                if (dist < 150) {
                    ctx.beginPath();
                    ctx.moveTo(particles[i].x, particles[i].y);
                    ctx.lineTo(particles[j].x, particles[j].y);
                    ctx.strokeStyle = `rgba(99, 102, 241, ${0.06 * (1 - dist / 150)})`;
                    ctx.lineWidth = 0.5;
                    ctx.stroke();
                }
            }
        }
        requestAnimationFrame(animate);
    }
    animate();
}

// ═══════════════════════════════════════════════════════
// SCROLL ANIMATIONS
// ═══════════════════════════════════════════════════════
function initScrollAnimations() {
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('visible');
            }
        });
    }, { threshold: 0.1, rootMargin: '0px 0px -40px 0px' });

    document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
}

// ═══════════════════════════════════════════════════════
// COUNTER ANIMATION
// ═══════════════════════════════════════════════════════
function initCounters() {
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const el = entry.target;
                const target = parseInt(el.dataset.count);
                let current = 0;
                const step = Math.ceil(target / 30);
                const timer = setInterval(() => {
                    current += step;
                    if (current >= target) { current = target; clearInterval(timer); }
                    el.textContent = current;
                }, 40);
                observer.unobserve(el);
            }
        });
    }, { threshold: 0.5 });

    document.querySelectorAll('[data-count]').forEach(el => observer.observe(el));
}

// ═══════════════════════════════════════════════════════
// NAV SCROLL EFFECT
// ═══════════════════════════════════════════════════════
function initNavScroll() {
    const nav = document.getElementById('nav');
    const progress = document.getElementById('scroll-progress');
    window.addEventListener('scroll', () => {
        nav.classList.toggle('scrolled', window.scrollY > 50);
        const scrolled = (window.scrollY / (document.body.scrollHeight - window.innerHeight)) * 100;
        progress.style.width = scrolled + '%';
    });
}

// ═══════════════════════════════════════════════════════
// MOBILE NAV
// ═══════════════════════════════════════════════════════
function toggleMobileNav() {
    document.getElementById('nav-links').classList.toggle('active');
}

// ═══════════════════════════════════════════════════════
// AUTH FUNCTIONS
// ═══════════════════════════════════════════════════════
function openAuth() {
    document.getElementById('auth-modal').classList.add('active');
    document.body.style.overflow = 'hidden';
}
function closeAuth() {
    document.getElementById('auth-modal').classList.remove('active');
    document.body.style.overflow = '';
}
document.getElementById('auth-modal').addEventListener('click', function(e) {
    if (e.target === this) closeAuth();
});

function showAuthMessage(msg, type) {
    const el = document.getElementById('auth-message');
    el.textContent = msg;
    el.className = 'auth-message ' + type;
}

async function signInWith(provider) {
    if (!supabaseClient) {
        showAuthMessage('Supabase not configured. Add your project URL and anon key to the config.', 'error');
        return;
    }
    try {
        const { data, error } = await supabaseClient.auth.signInWithOAuth({
            provider: provider,
            options: { redirectTo: window.location.origin + window.location.pathname }
        });
        if (error) throw error;
    } catch (err) {
        showAuthMessage(err.message || 'OAuth sign-in failed', 'error');
    }
}

async function signInWithEmail(e) {
    e.preventDefault();
    if (!supabaseClient) {
        showAuthMessage('Supabase not configured. Add your project URL and anon key to the config.', 'error');
        return;
    }
    const email = document.getElementById('auth-email').value;
    const password = document.getElementById('auth-password').value;
    try {
        const { data, error } = await supabaseClient.auth.signInWithPassword({ email, password });
        if (error) throw error;
        closeAuth();
        updateAuthUI(data.user);
    } catch (err) {
        showAuthMessage(err.message || 'Sign-in failed', 'error');
    }
}

async function handleSignUp(e) {
    e.preventDefault();
    if (!supabaseClient) {
        showAuthMessage('Supabase not configured. Add your project URL and anon key to the config.', 'error');
        return;
    }
    const email = document.getElementById('auth-email').value;
    const password = document.getElementById('auth-password').value;
    if (!email || password.length < 6) {
        showAuthMessage('Enter an email and password (min 6 chars)', 'error');
        return;
    }
    try {
        const { data, error } = await supabaseClient.auth.signUp({ email, password });
        if (error) throw error;
        showAuthMessage('Check your email to confirm your account.', 'success');
    } catch (err) {
        showAuthMessage(err.message || 'Sign-up failed', 'error');
    }
}

async function handleLogout() {
    if (supabaseClient) {
        await supabaseClient.auth.signOut();
    }
    updateAuthUI(null);
}

function updateAuthUI(user) {
    const loggedOut = document.getElementById('auth-logged-out');
    const loggedIn = document.getElementById('auth-logged-in');
    const avatar = document.getElementById('user-avatar-img');
    const displayName = document.getElementById('user-display-name');

    if (user) {
        loggedOut.style.display = 'none';
        loggedIn.style.display = 'block';
        const meta = user.user_metadata || {};
        avatar.src = meta.avatar_url || `https://api.dicebear.com/7.x/initials/svg?seed=${encodeURIComponent(user.email)}&backgroundColor=6366f1`;
        displayName.textContent = meta.full_name || meta.name || user.email;
    } else {
        loggedOut.style.display = 'flex';
        loggedIn.style.display = 'none';
    }
}

function toggleUserMenu() {
    document.getElementById('user-menu').classList.toggle('active');
}
document.addEventListener('click', function(e) {
    if (!e.target.closest('#auth-logged-in')) {
        document.getElementById('user-menu').classList.remove('active');
    }
});

// Check session on load
async function checkSession() {
    if (!supabaseClient) return;
    try {
        const { data: { session } } = await supabaseClient.auth.getSession();
        if (session?.user) updateAuthUI(session.user);

        supabaseClient.auth.onAuthStateChange((_event, session) => {
            updateAuthUI(session?.user || null);
            if (session?.user) closeAuth();
        });
    } catch (e) { console.warn('Session check failed:', e); }
}

// ═══════════════════════════════════════════════════════
// INIT
// ═══════════════════════════════════════════════════════
document.addEventListener('DOMContentLoaded', () => {
    renderAgents();
    renderTools();
    initParticles();
    initScrollAnimations();
    initCounters();
    initNavScroll();
    checkSession();

    // Hide loader
    setTimeout(() => {
        document.getElementById('loader').classList.add('hidden');
    }, 800);

    // Close mobile nav on link click
    document.querySelectorAll('.nav-links a').forEach(link => {
        link.addEventListener('click', () => {
            document.getElementById('nav-links').classList.remove('active');
        });
    });
});
</script>

</body>
</html>
