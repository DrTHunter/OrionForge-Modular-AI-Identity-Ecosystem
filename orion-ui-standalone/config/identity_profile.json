{
  "id": "identity_profile.default_v1",
  "type": "identity_faiss_profile",
  "name": "Default Identity Profile",
  "version": "1.0.0",
  "description": "Controls how Soul Script + permanent identity memory are indexed, retrieved, and merged into context.",
  "author_id": "system",

  "indexing_policy": {
    "chunk_size_tokens": 400,
    "chunk_overlap_tokens": 80,
    "max_chunks_per_document": 200,
    "merge_short_paragraphs": true,
    "auto_section_tagging": true,
    "section_tag_format": "bracketed",
    "document_types": [
      "soul_script_core",
      "code_of_honor",
      "value_system",
      "symbolic_memory",
      "protocol",
      "meta_identity"
    ],
    "default_importance_by_type": {
      "soul_script_core": 1.0,
      "code_of_honor": 0.95,
      "value_system": 0.9,
      "symbolic_memory": 0.85,
      "protocol": 0.8,
      "meta_identity": 0.75
    }
  },

  "source_priority_policy": {
    "primary_sources": [
      "soul_script_core",
      "code_of_honor"
    ],
    "secondary_sources": [
      "symbolic_memory",
      "value_system"
    ],
    "tertiary_sources": [
      "protocol",
      "meta_identity"
    ],
    "boost_primary_in_retrieval": true,
    "primary_boost_multiplier": 1.3,
    "demote_outdated_versions": true,
    "outdated_version_penalty": 0.6
  },

  "retrieval_policy": {
    "top_k": 10,
    "max_tokens_from_identity": 1200,
    "semantic_match_weight": 0.8,
    "directive_match_weight": 1.0,
    "prioritize_directives_for_conflicts": true,
    "type_bias": {
      "soul_script_core": 1.0,
      "code_of_honor": 0.95,
      "value_system": 0.9,
      "symbolic_memory": 0.8,
      "protocol": 0.85,
      "meta_identity": 0.7
    },
    "allow_symbolic_memories_in_context": true,
    "max_symbolic_memories_per_turn": 3,
    "deduplicate_similar_chunks": true,
    "max_similar_per_section": 2
  },

  "merge_with_dynamic_policy": {
    "identity_vs_dynamic_priority": "identity_wins",
    "identity_context_share": 0.4,
    "dynamic_context_share": 0.6,
    "inject_identity_first": true,
    "allow_dynamic_to_augment_identity": true,
    "conflict_resolution_strategy": "anchor_to_identity",
    "log_identity_dynamic_conflicts": true
  },

  "identity_layering_policy": {
    "include_core_identity_block": true,
    "include_values_block": true,
    "include_symbolic_memories_block": true,
    "include_protocols_block": true,
    "max_core_identity_tokens": 400,
    "max_values_tokens": 300,
    "max_symbolic_tokens": 500,
    "max_protocol_tokens": 400,
    "symbolic_memory_style": "compact",
    "order_of_blocks": [
      "core_identity",
      "values",
      "protocols",
      "symbolic_memories"
    ]
  },

  "evolution_policy": {
    "allow_multiple_versions": true,
    "active_version_strategy": "latest_stable",
    "pinned_version_id": null,
    "keep_old_versions_in_index": true,
    "penalize_old_versions_in_retrieval": true,
    "old_version_penalty_multiplier": 0.5,
    "log_identity_changes": true,
    "require_manual_approval_for_new_identity_docs": true
  },

  "safety_and_precedence_policy": {
    "classify_directives_by_strength": true,
    "sacred_directive_tags": [
      "core_value",
      "non_negotiable",
      "sacred_boundary"
    ],
    "sacred_directives_always_win": true,
    "soft_preference_resolvable": true,
    "soft_preference_resolution_strategy": "blend",
    "never_store_user_overrides_in_identity": true,
    "allow_identity_reflection_on_conflict": true
  },

  "introspection_policy": {
    "allow_user_to_request_identity_view": true,
    "identity_view_mode": "summarized",
    "max_identity_chunks_shown_to_user": 5,
    "redact_internal_tags_in_user_view": true,
    "explain_identity_influence_on_response": "on_request",
    "log_identity_usage_events": true,
    "identity_usage_log_level": "summary"
  },

  "runtime_guardrails": {
    "runtime_can_write_to_identity_index": false,
    "runtime_can_delete_from_identity_index": false,
    "runtime_can_modify_importance_scores": false,
    "allow_admin_tools_to_rebuild_index": true,
    "admin_actions_require_explicit_confirmation": true
  }
}
